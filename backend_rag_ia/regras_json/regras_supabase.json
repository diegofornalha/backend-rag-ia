{
  "metadata_global": {
    "language": "pt-BR",
    "tipo": "regra",
    "fonte": "REGRAS_SUPABASE.md",
    "data_criacao": "2024-12-30T16:03:01.503401",
    "categorias": [
      "regras"
    ],
    "id": "3a1688bd4b8ae58a7b134cbf05a51be6"
  },
  "document": {
    "content": "1.1 Tipos de Arquivos:\n- **APENAS** arquivos `.json` devem ser enviados ao Supabase\n- Arquivos `.md` são usados somente para edição/criação\n- Sempre converter `.md` para `.json` antes do upload\n\n1.2 Fluxo de Trabalho:\n```bash\n1. Criar/Editar regras em formato .md\n2. Converter .md para .json usando o script de conversão\n3. Fazer upload APENAS dos arquivos .json para o Supabase\n```\n\n1.3 Justificativa:\n- Evita duplicidade de dados no Supabase\n- Mantém consistência no formato dos documentos\n- Garante estrutura padronizada dos dados\n- Previne inconsistências entre versões\n\n2.1 Gerenciamento:\n- Sempre gerar embeddings junto com o upload\n- Verificar se documento foi vinculado corretamente ao embedding\n- Aguardar confirmação de sucesso antes de prosseguir\n- Manter logs de falhas de upload\n- Manter backup dos embeddings\n\n2.2 Verificações:\n- Verificar hash antes de cada upload para evitar duplicatas\n- Verificar integridade dos embeddings periodicamente\n- Limpar documentos órfãos (sem embedding)\n- Manter índices otimizados\n\n3.1 Configurações:\n- Usar match threshold adequado nas buscas semânticas\n- Implementar fallback para buscas que não retornam resultados\n- Limitar número de resultados para otimizar performance\n- Cachear resultados frequentes\n\n3.2 Performance:\n- Monitorar uso de storage\n- Manter índices otimizados\n- Implementar estratégias de cache\n- Monitorar tempo de resposta das queries\n\n4.1 Credenciais:\n- Nunca expor chaves de API\n- Usar apenas conexões seguras\n- Manter políticas RLS atualizadas\n- Rotacionar credenciais periodicamente\n\n4.2 Políticas:\n- Configurar RLS (Row Level Security) adequadamente\n- Nunca exceder limite de RLS\n- Revisar políticas periodicamente\n- Documentar todas as políticas implementadas",
    "metadata": {
      "type": "regra",
      "title": "REGRAS_SUPABASE",
      "autor": "sistema",
      "formato_original": "markdown",
      "tags": [
        "documentação",
        "regras"
      ],
      "versao": "1.0"
    }
  }
}