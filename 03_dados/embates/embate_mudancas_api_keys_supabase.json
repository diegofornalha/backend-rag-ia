{
  "titulo": "Mudanças nas API Keys do Supabase (2025)",
  "version_key": "mudancas_api_keys_supabase_v1",
  "conteudo": "# Mudanças nas API Keys do Supabase (2025)\n\n## Contexto\nO Supabase anunciou mudanças significativas na forma como as API keys funcionam, visando melhorar a segurança e a experiência do desenvolvedor. Estas mudanças começarão a afetar novos projetos a partir de 1º de maio de 2025, e projetos existentes terão até 1º de outubro de 2025 para migrar.\n\n## Principais Mudanças\n\n### 1. Renomeação das Chaves\n- `anon key` → `publishable key`\n- `service_role key` → `secret key`\n\n### 2. Novo Formato\nAs chaves terão um novo formato, mais simples e legível:\n\n**Formato Antigo (Legacy):**\n```\nanon key: eyJhbGciOiJIUzI1...FDsBGn0iqSmL28Zeg8f0\nservice_role key: eyJhbGciOiJIUzI1...SEVEyZQNhffCoSj4P5A\n```\n\n**Novo Formato:**\n```\npublishable key: sb_publishable_123abc\nsecret key: sb_secret_123abc\n```\n\n### 3. Benefícios das Novas Chaves\n1. Possibilidade de revogar chaves individuais\n2. Revogação de chaves sem deslogar usuários existentes\n3. Criação mais fácil de chaves com claims personalizadas\n4. Melhor segurança e gerenciamento de acesso\n\n## Cronograma de Implementação\n\n### Q4 2024\n- Introdução das novas API keys\n- Novos projetos gerarão ambos os tipos de chaves (novas e legacy)\n- Projetos existentes podem continuar usando as chaves legacy\n\n### 1º de Maio de 2025\n- Início dos lembretes mensais para migração\n- Novos projetos serão criados apenas com as novas chaves\n- Projetos restaurados não terão mais as chaves legacy\n\n### 1º de Outubro de 2025\n- Chaves legacy serão removidas\n- Todas as aplicações precisam estar usando as novas chaves\n\n## Impacto no Nosso Projeto\n\n### Mudanças Necessárias\n1. Atualizar variáveis de ambiente:\n```env\n# Antes\nSUPABASE_ANON_KEY=eyJhbGciOiJIUzI1...\nSUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1...\n\n# Depois\nSUPABASE_PUBLISHABLE_KEY=sb_publishable_123abc\nSUPABASE_SECRET_KEY=sb_secret_123abc\n```\n\n2. Atualizar código que utiliza o cliente Supabase:\n```python\n# Antes\nsupabase = create_client(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)\n\n# Depois\nsupabase = create_client(SUPABASE_URL, SUPABASE_SECRET_KEY)\n```\n\n### Comportamento das Chaves\n- `publishable key`: Assume role `anon` por padrão\n- `secret key`: Assume role `service_role` por padrão\n- Quando um JWT de usuário é passado via header `Authorization`, o role do JWT tem precedência\n\n## Plano de Migração\n1. Aguardar disponibilidade das novas chaves (Q4 2024)\n2. Criar ambiente de teste com as novas chaves\n3. Atualizar todas as variáveis de ambiente\n4. Atualizar código que utiliza o cliente Supabase\n5. Testar todas as funcionalidades\n6. Planejar janela de deploy para produção\n7. Após migração bem-sucedida, revogar chaves antigas\n\n## Observações\n- A migração deve ser planejada com antecedência\n- Recomenda-se criar um ambiente de teste separado\n- Importante manter backup das chaves antigas até confirmar que tudo está funcionando\n- Considerar impacto em deploys automáticos (CI/CD)\n\n## Status\nPendente - Aguardando disponibilidade das novas chaves em Q4 2024.",
  "error_log": null
}
